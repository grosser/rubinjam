#!/usr/bin/env ruby
# generated by rubinjam v0.2.0 -- https://github.com/grosser/rubinjam
module Rubinjam
  LIBRARIES = {
    "hello/world" => "module Hello\n  WORLD = \"hello world\"\nend\n"
  }

  ROOT = File.expand_path("../", __FILE__) << "/lib/"

  module ModuleAutoloadFix
    def self.included(base)
      base.class_eval do
        alias autoload_without_rubinjam autoload

        def autoload(const, file)
          if Rubinjam::LIBRARIES[file]
            @rubinjam_autload ||= {}
            @rubinjam_autload[const] = file
          else
            autoload_without_rubinjam(const, file)
          end
        end

        def const_missing(const)
          if @rubinjam_autload && file = @rubinjam_autload[const]
            require file
            const_get(const)
          else
            super
          end
        end
      end
    end
  end

  module BaseAutoloadFix
    def self.included(base)
      base.class_eval do
        alias autoload_without_rubinjam autoload

        def autoload(const, file)
          if Rubinjam::LIBRARIES[file]
            require file
          else
            autoload_without_rubinjam(const, file)
          end
        end
      end
    end
  end
end

Module.send(:include, Rubinjam::ModuleAutoloadFix)
include Rubinjam::BaseAutoloadFix

def require(file)
  normalized_file = file.sub(Rubinjam::ROOT, "")
  if code = Rubinjam::LIBRARIES[normalized_file]
    return if code == :loaded
    eval(code, TOPLEVEL_BINDING, "rubinjam/#{normalized_file}.rb")
    Rubinjam::LIBRARIES[normalized_file] = :loaded
  else
    super
  end
end
#!/usr/bin/env ruby
require 'optparse'
require 'hello/world'
puts Hello::WORLD
